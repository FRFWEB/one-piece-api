<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>One piece API</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body>
    <header>
      <div class="container-fluid">
        <div class="row one-piece-background_1">
          <div class="col-sm-12 py-2">
            <a href="/" class="fs-3 fw-bold text-white">ONE PIECE API</a>
          </div>
        </div>
      </div>
    </header>
    <main>
      <section class="mt-2">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-12">
              <h1 class="text-center">ONE PIECE API - FREE</h1>
            </div>
          </div>
        </div>
      </section>
      <section class="mt-2">
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-sm-6">
              <p
                class="bg-info text-white p-1"
                style="cursor: pointer"
                id="one_piece_link_copy"
              >
                http://localhost:60/api/v1/nakamas/name="nami"
              </p>
            </div>
          </div>
        </div>
      </section>
      <section>
        <div class="container">
          <div class="row">
            <div class="col-sm-12" id="one_piece_image"></div>
            <div class="col-sm-12" id="one_piece_nakama"></div>
            <div class="col-sm-12" id="one_piece_biography"></div>
            <div class="col-sm-6" id="one_piece_recompese"></div>
            <div class="col-sm-6" id="one_piece_pirate"></div>
          </div>
        </div>
      </section>
    </main>
    <footer></footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
    <script defer>
      let nakamas = ["nami", "Roronoa_Zoro", "Shanks", "nami", "usopp"];
      fetch(`http://localhost:60/api/v1/nakamas/name=${nakamas[0]}`)
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
          let setContentImage = document.getElementById("one_piece_image");
          let setContentBiography = document.getElementById(
            "one_piece_biography"
          );
          let setNakamaRecompese = document.getElementById(
            "one_piece_recompese"
          );
          let setGroupPirate = document.getElementById("one_piece_pirate");
          let setNameNakama = document.getElementById("one_piece_nakama");
          setNameNakama.innerHTML = `<p>${data.name}</p>`;
          setContentImage.innerHTML = `<a download href="${data.image}">Download image</a>`;
          setContentBiography.innerHTML = `<p>${data.biography}</p>`;
          setNakamaRecompese.innerHTML = `<p>${data.recompense}</p>`;
          setGroupPirate.innerHTML = `<p>${data.pirateGroup}</p>`;
        });

      let getBoxLink = document.getElementById("one_piece_link_copy");
      getBoxLink.addEventListener("click", () => {
        let tmpTextarea = document.createElement("textarea");
        getBoxLink.appendChild(tmpTextarea);
        tmpTextarea.innerHTML = getBoxLink.textContent;
        tmpTextarea.select();
        document.execCommand("copy");
        tmpTextarea.remove();
        getBoxLink.classList.remove("bg-info");
        getBoxLink.classList.add("bg-success");
        setTimeout(() => {
          getBoxLink.classList.add("bg-info");
          getBoxLink.classList.remove("bg-success");
        }, 1000);
      });
    </script>
  </body>
</html>
